var v=Object.defineProperty;var w=(t,e,s)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var a=(t,e,s)=>(w(t,typeof e!="symbol"?e+"":e,s),s),f=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var l=(t,e,s)=>(f(t,e,"read from private field"),s?s.call(t):e.get(t)),d=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},m=(t,e,s,i)=>(f(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);var g=(t,e,s)=>(f(t,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const L=(t,e=1e3)=>{const s=document.getElementById("message");s&&s.remove();const i=document.createElement("div");i.id="message",i.innerText=t,document.body.appendChild(i),setTimeout(()=>{i.style.top="0px"},1),setTimeout(()=>{i.style.top=""},e)},h=()=>document.createElement("div");var c,r,u,y;class T{constructor(e){d(this,u);d(this,c,void 0);d(this,r,void 0);m(this,c,e)}show(){if(l(this,r))return;const e=h();return e.className="loading",e.append(h(),h(),h()),l(this,c).appendChild(e),e.addEventListener("click",g(this,u,y)),m(this,r,e),this}hide(){if(l(this,r))return l(this,r).remove(),m(this,r,null),this}error(){let e="加载失败";throw l(this,r).innerHTML=`<span>${e}</span>`,new Error(e)}}c=new WeakMap,r=new WeakMap,u=new WeakSet,y=function(e){e.stopPropagation()};class M{constructor(){a(this,"element");a(this,"showing");a(this,"timer");this.element=document.createElement("div"),this.element.className="mask",document.body.appendChild(this.element),this.showing=!1}set onclick(e){this.element.onclick=e}show(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.element.style.pointerEvents="auto",this.element.style.display="block",setTimeout(()=>this.element.style.opacity="0.5",10)}hide(){this.element.style.opacity="0",this.element.style.pointerEvents="none",this.timer=setTimeout(()=>this.element.style.display="none",1e3)}toggle(){this.showing?this.hide():this.show()}destroy(){this.element.remove()}}function b(t){const e=t?document.querySelector(t):document.createElement("dialog"),s=e.showModal;e.showModal=()=>{s.call(e),e.classList.add("show")};const i=e.close;return e.close=()=>{e.addEventListener("transitionend",()=>i.call(e),{once:!0}),e.classList.remove("show")},e.addEventListener("click",o=>{o.target===e&&e.close()}),e}export{T as L,M,b as g,L as s};
